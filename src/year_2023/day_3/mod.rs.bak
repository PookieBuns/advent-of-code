use std::collections::HashSet;
const DIRECTIONS: [(i32, i32); 8] = [
    (-1, -1),
    (0, -1),
    (1, -1),
    (-1, 0),
    (1, 0),
    (-1, 1),
    (0, 1),
    (1, 1),
];

struct Number {
    value: u32,
    gear: HashSet<Gear>,
}

#[derive(Hash, Eq, PartialEq)]
struct Gear {
    x: i32,
    y: i32,
}

fn get_gears(i: usize, j: usize, char_vec: &Vec<Vec<char>>) -> HashSet<Gear> {
    let mut gears = HashSet::new();
    for (dx, dy) in DIRECTIONS {
        let x = i as i32 + dx;
        let y = j as i32 + dy;
        if x < 0 || y < 0 || x >= char_vec.len() as i32 || y >= char_vec[0].len() as i32 {
            continue;
        }
        let char = char_vec[x as usize][y as usize];
        if char == '*' {
            gears.insert(Gear { x, y });
        }
    }
    gears
}

fn parse_numbers(numbers: Vec<Number>) -> i32 {

}

fn part_1(input: &str) -> u32 {
    let char_vec = convert_to_char_vector(input);
    let mut ans = 0;
    let mut number = None;
    let mut gears = HashSet::new();
    let mut numbers = Vec::new();
    for (i, line) in char_vec.iter().enumerate() {
        for (j, char) in line.iter().enumerate() {
            if char.is_ascii_digit() {
                let digit = char.to_digit(10).unwrap();
                match number {
                    None => number = Some(digit),
                    Some(n) => number = Some(n * 10 + digit),
                }
                gears.extend(get_gears(i, j, &char_vec));
            } else {
                numbers.push(Number {
                    value: number.unwrap(),
                    gear: gears,
                });
                number = None;
                gears = HashSet::new();
            }
        }
    }
    parse_numbers(numbers);
}

fn convert_to_char_vector(input: &str) -> Vec<Vec<char>> {
    let mut vec = Vec::new();
    for line in input.lines() {
        let mut cur_vec = Vec::new();
        for char in line.chars() {
            cur_vec.push(char);
        }
        vec.push(cur_vec);
    }
    vec
}
pub fn solve() -> String {
    let input = include_str!("input.txt");
    let part_1_ans = part_1(input);
    format!("Part 1: {}\nPart 2: ", part_1_ans)
}
